<!DOCTYPE html>
<html>
<head>
	<title>Пример 3</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
	<link rel="stylesheet" href="ui.css" />
	<script src="jquery-2.2.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script src="jcta.min.js"></script>
	<script src="ui.js"></script>
        <style>                    
          .mv20 {margin: 20px 0;}
        </style>  
</head>	
<body>
	<div class='container'>
 		<div class='row'>
     		<div class='col-md-8 center-block' style='float:none'>     		  
				<table class='table table-bordered mv20'>
					<thead> 
            			<tr> 
              				<th>#</th>
              				<th>id</th>
              				<th>Имя</th>
              				<th>Фамилия</th>              	        
              				<th></th>              	        
            			</tr>
          			</thead>    
          			<tbody data-jc="repeater__datasource" >          	
          				<script type="text/html">
      					    <tr data-index="$index">
              					<td>{{index+1}}</td>
                				<td>{{id}}</td>
                				<td class='edit' data-type='textbox' data-field='firstname'>{{firstname}}</td>
                				<td class='edit' data-type='textbox' data-field='lastname'>{{lastname}}</td>
                				<td><button type='button' class='btn btn-danger btn-flat btn-xs' data-bind="rem__click:view_modal"  data-id='$index' title='Удалить запись'><i class='fa fa-fw fa-remove'></i></button></td>        
              				</tr>
          				</script>	
          			</tbody>	
          			<tfooter> 
            			<tr> 
              				<th></th>
              				<th><div data---="textbox__form.id__required:true;placeholder:id;class:form-control input-sm;"></div></th>
              				<th><div data---="textbox__form.firstname__required:true;placeholder:Имя;class:form-control input-sm;"></div></th>
              				<th><div data---="textbox__form.lastname__required:true;placeholder:Фамилия;class:form-control input-sm;"></div></th>   
              				<th><button type='button' class='btn btn-primary btn-flat btn-xs' data-bind="rem__click:view_modal"  data-id='$index' title='Добавить запись'><i class='fa fa-fw fa-plus'></i></button></th>              	        
            			</tr>
          			</tfooter>    
				</table>				  
			</div>
		</div>
	</div>	
<script>
   var datasource = [
   	 { id: 125, firstname: 'Имя 1', lastname: 'Фамилия 1'},   	 
   	 { id: 133, firstname: 'Имя 2', lastname: 'Фамилия 2'},   	 
   	 { id: 143, firstname: 'Имя 3', lastname: 'Фамилия 3'},   	 
   	 { id: 145, firstname: 'Имя 4', lastname: 'Фамилия 4'},   	 
   ]	
   $('body').on('click', 'table td.edit', function(e) { 			
   	   if ($(e.target).closest('select, input, .btn-group, .btn, a').length) return;          
   		var tr = $(this).closest('tr');  
   		var ind = tr.data('index'); 
   		var type = $(this).data('type');
   		var field = $(this).data('field');
   		$(this).html('<div data---="textbox__datasource[{0}].{1}__class:form-control input-sm;"></div>'.format(ind, field));
   		COMPILE();          	   
   })	
</script>
</body>
</html>