<!DOCTYPE html>
<html>
<head>
	<title>Пример 2</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
	<link rel="stylesheet" href="ui.css" />
	<script src="jquery-2.2.4.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script src="jcta.min.js"></script>
	<script src="ui.js"></script>
        <style>
          body {background-color: #eee;}
          .mb10 {margin-bottom: 10px;}
        </style>  
</head>	
<body>
<!-- Modal Win-->
<div data-jc="form" data-jc-id="win" id="win" data-jc-path="win.view" data-jc-config="if:true;width:600;title:Заголовок;submit:modal_save;esc:true;autofocus:true" class="hidden">
    <div style="padding:10px">  
        <div class="form-group">        	    	        	    
            <div data-jc="textbox" data-jc-path="win.form.title" data-jc-config="placeholder:Заголовок;class:form-control;required:true;maxlength:100">Заголовок</div>
        </div>    
       	<div class="form-group">        	    	        	    
            <div data-jc="textarea" data-jc-path="win.form.body" data-jc-config="placeholder:Сообщение;class:form-control;required:true;maxlength:300">Сообщение</div>
       	</div>
       	<div class="form-group">        	    	        	    
           <div style="width:200px;" data-jc="dropdown" data-jc-path="win.form.expire" data-jc-config="items:3 мин|180,10 мин|600,30 мин|1800,1 час|3600,5 часов|18000,10 часов|36000,1 день|8640;class:form-control;">Время жизни сообщения</div>
       	</div>
	<div class="ui-form-buttons">
            <button name="cancel"><i class="fa fa-remove"></i> Отменить</button>
            <button name="submit"><i class="fa fa-check" aria-hidden="true"></i> Сохранить</button>
        </div>
    </div>    
</div>
<!--/Modal win-->
<div class='container'>
  <div class='row'>
     <div class='col-md-6'>
	<div class="panel panel-default" style='margin: 20px 0; padding:10px;'>
	   <h4>Форма<br><small>Используются компоненты: j-Textbox, j-Dropdown, j-Click, j-Error, j-Input</small></h4>
	   <div data---="textbox__form1.firstname__required:true;placeholder:Имя;icon2:pencil;error:Введите ваше имя" class='mb10'>Имя</div>
	   <div data---="textbox__form1.lastname__required:true;placeholder:Фамилия;icon:pencil;error:Введите вашу фамилию" class='mb10'>Фамилия</div>
	   <div data---="textbox__form1.secondname__placeholder:Отчество;" class='mb10'>Отчество</div>
	   <div data---="textbox__form1.db__type:number;increment:true;required:true;" class='mb10' style='width: 150px;'>Год рождения</div>
	   <div data---="radiobutton__form1.sex__items:Муж|0,Жен|1;type:number;">Ваш пол</div>
	   <div data---="dropdown__form1.color_id__items:,Красный|1,Зеленый|2,Желтый|3">Ваш любимый цвет</div>
	   <div data---="input__form1.phone__mask:+7(###)###-####;maskregexp:null,null,null,\d,\d,\d,null,\d,\d,\d,null,\d,\d,\d,\d">Телефон</div>
	   <div data-jc="textbox" data-jc-path="form1.email" data-jc-config="placeholder:Email;icon2:envelope-o;required:true;type:email;" class='mb10'>Email</div>
	   <div data-jc="textbox" data-jc-path="form1.login" data-jc-config="placeholder:Логин;required:true;keypress:true;maxlength:20;validation:value.match(/^[0-9а-яА-Яa-zA-Z _\.(),\-]+$/)" class='mb10'>Логин</div>
           <div data---="textbox__form1.password__type:password;required:true;maxlength:20;validation:value.match(/^[0-9a-zA-Z _\.(),\-]+$/)" class='mb10'>Пароль</div>	
	   <div data---="textbox__form1.name__required:true;innerlabel:true;placeholder:Место работы;icon2:pencil;error:Введите место работы" class='mb10'>Место работы</div>
	   <div data---="textarea__form1.description__placeholder:Описание деятельности;" class='mb10'>Описание деятельности</div>
	   <div data---="checkbox__form1.agree_terms">Согласен с правилама</div>
	   <div data-bind="form1.agree_terms__visible:value !== true">Отметьте пункт согласен с правилами, иначе форма не будет сохранена</div>	
	   <div data-jc="error" data-jc-path="errors1"></div>
           <div class='text-center'>
              <button data-jc="click" data-jc-path="submit1" data-loading-text="<i class='fa fa-spinner fa-spin'></i> Ждем..." class='btn btn-default btn-sm' >Сохранить 1</button> 
              <button data-bind="form1.btn__click:submit2" data-loading-text="<i class='fa fa-spinner fa-spin'></i> Ждем..." class='btn btn-default btn-sm'>Сохранить 2</button>
           </div>  
        </div>        
     </div>
     <div class='col-md-6'>
	<div class="panel panel-default" style='margin: 20px 0; padding:10px;'>
	   <h4>Форма в стиле Bootstrap<br><small>Используются компоненты: j-Textbox, j-Dropdown</small></h4>	
	   <div class="form-group">
	       <div data---="textbox__form2.firstname__required:true;placeholder:Имя;error:Введите ваше имя;class:form-control;">Имя</div>
	   </div>
	   <div class="form-group">
	       <div data---="textbox__form2.lastname__required:true;placeholder:Фамилия;error:Введите вашу фамилию;class:form-control;">Фамилия</div>
	   </div>
	   <div class="form-group">
	       <div data---="textbox__form2.secondname__placeholder:Отчество;class:form-control;">Отчество</div>	   
           </div>
	   <div class="form-group">
		   <div data---="dropdown__form2.color_id__items:,Красный|1,Зеленый|2,Желтый|3;class:form-control;">Ваш любимый цвет</div>
	   </div>
	   <div class="form-group">
	       <div class="input-group">
	         <span class="input-group-addon" id="basic-addon1"><i class="fa fa-envelope-o" aria-hidden="true"></i></span>
	         <div data---="textbox__form2.email__required:true;type:email;placeholder:Введите Ваш Email;class:form-control;"></div>
               </div> 
	   </div>
	   <div class="form-group text-center">
              <hr> 
              <button data-bind="form2.btn__click:submit3" data-loading-text="<i class='fa fa-spinner fa-spin'></i> Ждем..." class='btn btn-default btn-sm'>Сохранить 3</button>
           </div>  
        </div>        
	<div class="panel panel-default" style='margin: 20px 0; padding:10px;'>
	   <h4>Модальное окно<br><small>Используются компоненты: j-Textbox, j-Dropdown</small></h4>	
	   <div class="form-group text-center">
              <button data-bind="form3.btn__click:view_modal" class='btn btn-default btn-sm'>Открыть модальное окно</button>
           </div>  
	</div>
     </div>
  </div>
</div>
<script>
  var form1 = {'db': 1950, 'sex': 0, 'phone':'+7(999)166-6666', };
  function submit1(e) {
        SET('errors1', null);          
	if (form1.db<1960) SET('errors1', 'Год рождения должен быть больше 1950');
	if (!form1.agree_terms) SET('errors1', 'Вы должны согласиться с правилами');
        if (form1.errors) return;
	if (!VALIDATE('form1.*')) return; 
        $(e.element).button('loading');       
        setTimeout(()=>{
	   console.log(form1);
           alert(JSON.stringify(form1));  
	}, 1000)
  }
  function submit2(e, event, value, path) {
        SET('errors', null);          
	if (form1.db<1960) SET('errors1', 'Год рождения должен быть больше 1950');
	if (!form1.agree_terms) SET('errors1', 'Вы должны согласиться с правилами');
        if (form1.errors) return;
	if (!VALIDATE('form1.*')) return; 
        $(e.element).button('loading');       
        setTimeout(()=>{
	   console.log(form1);
           alert(JSON.stringify(form1));  
	}, 1000)
  }
  function submit3(e) {
        SET('errors', null);          
	if (!VALIDATE('form2.*')) return; 
        $(e.element).button('loading');       
        setTimeout(()=>{
	   console.log(form2);
           alert(JSON.stringify(form2));  
	}, 1000)
  }
  function view_modal() {
      RECONFIGURE('#win', { title: 'title' });  
      SET('win.view', true); 
  }
  function modal_save() {
     console.log(win.form); 
     alert(JSON.stringify(win.form));  
     SET('win.view', false); 
  }
</script>
</body>
</head>